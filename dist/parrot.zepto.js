/**
 * parrotjs - Use browser features (Notification, Storage, Vibration, Battery...) and make easy the communication with your API.
 * @version v0.12.12
 * @link    http://github.com/sailor/parrotjs
 * @author  Kiko Beats (https://github.com/Kikobeats)
 * @license MIT
 */
(function(){"use strict";var e;e=this.parrot={version:"0.12.12",$:"undefined"!=typeof $$&&null!==$$?$$:$},function(){var t,n,r;return t={},n=function(e){var t,n,r,u,i,o,a,s,l,c;for(i=new Url,c=["protocol","path","host","port","hash"],o=0,s=c.length;s>o;o++)n=c[o],i[n]="";for(t=a=0,l=e.length;l>a;t=a+=2)r=e[t],i.query[r]=e[t+1];return u=i.toString(),"?"===u.charAt(0)&&(u=u.substring(1)),u},r=require("fn-partial"),e.environment="development",e.language=navigator.language.slice(0,2),e.endpoint={add:function(e){return this[e.name]=function(){return e.url},this},set:function(t){return e.environment=t,this}},e.url={getOrUpdate:function(e,r){var u;if(null==r&&(r=void 0),null!=r){for(u in r)t[e][u]=r[u];null!=r.query&&(t[e].query=n(r.query))}return t[e]},add:function(e){var u;return u=e.name,delete e.name,null!=e.query&&(e.query=n(e.query)),t[u]=e,this[u]=r(this.getOrUpdate,u),this}}}(),function(){return e.ajax=function(t,n){var r,u,i,o,a;return r=function(t){var n;return n={METHOD:"get",SEND:{},HEADERS:{},ASYNC:!0,DATATYPE:"json",CONTENT_TYPE:"application/x-www-form-urlencoded"},new Promise(function(r,u){return e.$.ajax({url:t.url,type:t.method||n.METHOD,data:t.send||n.SEND,dataType:t.dataType||n.DATATYPE,contentType:t.contentType||n.CONTENT_TYPE,async:t.async||n.ASYNC,headers:t.headers||n.HEADERS,success:function(e){return 0===e.status?u({code:0,message:{errors:[{param:"url",msg:"Server Unavailable."}]}}):r(e)},error:function(e,t){var n;if(t="object"==typeof e?e:t,null!=t.responseJSON)n=t.responseJSON;else try{n=JSON.parse(t.response)}catch(r){n=t.response}return u({code:t.status,message:n})}})})},u=function(e,t){return r(e).then(function(e){return t(null,e)},function(e){return t(e,null)})},i=""+e.endpoint[e.environment](),t.url?t.url!==i&&t.url!==""+i+"/"+t.path&&t.url!==""+i+"?"+t.query&&t.url!==""+i+"/"+t.path+"?"+t.query&&(null!=t.path&&(t.url=""+t.url+"/"+t.path),null!=t.query&&(t.url=""+t.url+"?"+t.query)):("string"==typeof arguments[0]&&(null!=("function"==typeof(o=e.url)[a=arguments[0]]?o[a]():void 0)?t=e.url.getOrUpdate(arguments[0],arguments[1]):"object"==typeof arguments[1]?(t=arguments[1],t.url=arguments[0]):t={url:arguments[0]},"object"==typeof arguments[1]&&(n=arguments[2])),t.query&&t.path?t.url=""+i+"/"+t.path+"?"+t.query:(t.query&&!t.path&&(t.url=""+i+"?"+t.query),t.path&&!t.query&&(t.url=""+i+"/"+t.path))),u(t,n)}}(),function(){var t,n,r,u,i,o,a,s,l;return i=require("fn-partial"),r=function(){var t,r,u,o,a,s,l,c;for(s=Object.keys(localStorage),r=0,o=s.length;o>r;r++)t=s[r],e.local[t]=i(n,"local",t);for(l=Object.keys(sessionStorage),c=[],u=0,a=l.length;a>u;u++)t=l[u],c.push(e.session[t]=i(n,"session",t));return c}(),l=function(e){return"local"===e?localStorage:sessionStorage},n=function(e,t){var n,r;n=l(e).getItem(t);try{return n=JSON.parse(n)}catch(u){return r=u,n}},t=function(t,r,u){return"string"!=typeof u&&(u=JSON.stringify(u)),l(t).setItem(r,u),e[t][r]=i(n,t,r)},o=function(t,n){return delete e[t][n],l(t).removeItem(n)},a=function(t){var n,r,u,i;for(r=Object.keys(l(t)),u=0,i=r.length;i>u;u++)n=r[u],delete e[t][n];return l(t).clear()},s=function(e){return l(e).length},u=function(e,t){return null!=l(e)[t]},e.local={add:function(e,n){return t("local",e,n),this},remove:function(){var e,t,n;for(t=0,n=arguments.length;n>t;t++)e=arguments[t],o("local",e);return this},removeAll:function(){return a("local"),this},size:function(){return s("local")},isAvailable:function(e){return u("local",e)}},e.session={get:function(){return n("session","session")},add:function(){var e,n;return 1===arguments.length?(n="session",e=arguments[0]):(n=arguments[0],e=arguments[1]),t("session",n,e),this},remove:function(){var e,t,n;if(0===arguments.length)o("session","session");else for(t=0,n=arguments.length;n>t;t++)e=arguments[t],o("session",e);return this},removeAll:function(){return a("session"),this},size:function(){return s("session")},isAvailable:function(){var e;return e=0===arguments.length?"session":arguments[0],u("session",e)}}}(),function(){var t,n;return t={},n=require("fn-partial"),e.notification={getOrUpdate:function(e,n){var r;if(null==n&&(n=void 0),null!=n)for(r in n)t[e][r]=n[r];return t[e]},add:function(e){var r;return r=e.name,delete e.name,t[r]=e,this[r]=n(this.getOrUpdate,r),this},show:function(e,t){var n,r;return 1===arguments.length&&"object"==typeof e&&(e=void 0,t=arguments[0]),r=function(e){var t,n;try{return Notification.requestPermission(),n=e.title,delete e.title,new Notification(n,e)}catch(r){throw t=r,new Error("Notification API is not available.")}},null==e?r(t):(n=this.getOrUpdate(e,t),r(n))}}}(),function(){var t;return t=document.body,e.device={detection:function(){return t.dataset.lang=e.language,t.dataset.os=e.device.os.name.toLowerCase(),t.dataset.device=e.device.type,t.dataset.orientation=e.device.screen.orientation,t.dataset.screen=e.device.screen.size,t.dataset.retina=1===this.screen.pixelRatio?!1:!0},noDetection:function(){var e,n,r,u,i;for(u=["lang","os","device","orientation","screen","retina"],i=[],n=0,r=u.length;r>n;n++)e=u[n],i.push(delete t.dataset[e]);return i}}}(),e.$(function(){var t;return t=function(){var t,n,r,u,i,o,a,s,l,c,d;l=e.device.detection,d=e.device.noDetection,i=function(e,t){var n,r,u;return r=function(e,t){return 0===t?e:r(t,e%t)},e===t?"1/1":(t>e&&(u=e,e=t,t=u),n=r(e,t),"undefined"==typeof u?e/n+"/"+t/n:t/n+"/"+e/n)},r=(new UAParser).getResult(),delete r.ua,null!=r.cpu.architecture&&(r.cpu=r.cpu.architecture),delete r.cpu,c=r.device,delete r.device;for(u in c)a=c[u],null!=a&&(r[u]=a);return e.device=r,s=screen.width,t=screen.height,o=t>s&&480>s||s>t&&480>t?"small":"normal",n=1>t/s?"landscape":"portrait",e.device.screen={width:s,height:t,size:o,orientation:n,pixelRatio:devicePixelRatio||"unsupported",aspectRatio:i(s,t)},null==e.device.type&&"normal"===o&&(e.device.type="desktop"),e.device.detection=l,e.device.noDetection=d},t(),e.device.detection(),e.$(window).on("resize",t),e.$(window).on("orientationchange",t)})}).call(this);