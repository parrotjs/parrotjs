/**
 * parrotjs - Client library to connect your frontend application with whatever API backend
 * @version v0.11.27a
 * @link    http://github.com/sailor/parrotjs
 * @author  Kiko Beats (https://github.com/Kikobeats)
 * @license MIT
 */
(function(){"use strict";var e;e=this.parrot={version:"0.12.7beta",environment:"development",language:window.navigator.language.slice(0,2),endpoint:{},url:{},local:{},session:{},notification:{},device:{},$:"undefined"!=typeof $$&&null!==$$?$$:$},e._partial=function(e){var n;return n=Array.prototype.slice.call(arguments,1),function(){var t;return t=n.concat(Array.prototype.slice.call(arguments)),e.apply(this,t)}},e.device.detection=function(){return e.$(document.body).attr("data-lang",e.language),e.$(document.body).attr("data-os",e.device.os.name),e.$(document.body).attr("data-device",e.device.type),e.$(document.body).attr("data-orientation",e.device.screen.orientation),e.$(document.body).attr("data-screen",e.device.screen.size)},e.device.noDetection=function(){var n,t,r,i,o;for(i=["lang","os","device","orientation","screen"],o=[],t=0,r=i.length;r>t;t++)n=i[t],o.push(e.$(document.body).removeAttr("data-"+n));return o},function(){return e.ajax=function(n,t){var r,i,o;return r=function(n){var t;return t={METHOD:"get",SEND:{},HEADERS:{},ASYNC:!0,DATATYPE:"json",CONTENT_TYPE:"application/x-www-form-urlencoded"},new Promise(function(){return function(r,i){return e.$.ajax({url:n.url,type:n.method||t.METHOD,data:n.send||t.SEND,dataType:n.dataType||t.DATATYPE,contentType:n.contentType||t.CONTENT_TYPE,async:n.async||t.ASYNC,headers:n.headers||t.HEADERS,success:function(e){return 0===e.status?i({code:0,message:{errors:[{param:"url",msg:"Server Unavailable."}]}}):r(e)},error:function(e,n){var t;if(n="object"==typeof e?e:n,null!=n.responseJSON)t=n.responseJSON;else try{t=JSON.parse(n.response)}catch(r){t=n.response}return i({code:n.status,message:t})}})}}(this))},i=function(){return function(e,n){return r(e).then(function(e){return n(null,e)},function(e){return n(e,null)})}}(this),o=""+e.endpoint[e.environment](),n.url?n.url!==o&&n.url!==""+o+"/"+n.path&&n.url!==""+o+"?"+n.query&&n.url!==""+o+"/"+n.path+"?"+n.query&&(null!=n.path&&(n.url=""+n.url+"/"+n.path),null!=n.query&&(n.url=""+n.url+"?"+n.query)):("string"==typeof arguments[0]&&(null!=e.url._URLS[arguments[0]]?n=e.url._bindAdd(arguments[0],arguments[1]):"object"==typeof arguments[1]?(n=arguments[1],n.url=arguments[0]):n={url:arguments[0]},"object"==typeof arguments[1]&&(t=arguments[2])),n.query&&n.path?n.url=""+o+"/"+n.path+"?"+n.query:(n.query&&!n.path&&(n.url=""+o+"?"+n.query),n.path&&!n.query&&(n.url=""+o+"/"+n.path))),i(n,t)}}(),function(n){return n.add=function(e){return this[e.name]=function(){return e.url},this},n.set=function(n){return e.environment=n,this}}(e.endpoint),function(n){var t,r,i;return t={},i=function(e){var n,t,r,i,o,u,a,s,c,l;for(o=new Url,l=["protocol","path","host","port","hash"],u=0,s=l.length;s>u;u++)t=l[u],o[t]="";for(n=a=0,c=e.length;c>a;n=a+=2)r=e[n],o.query[r]=e[n+1];return i=o.toString(),"?"===i.charAt(0)&&(i=i.substring(1)),i},r=function(e,n){var r;if(null==n&&(n=void 0),null!=n){for(r in n)t[e][r]=n[r];null!=n.query&&(t[e].query=i(n.query))}return t[e]},n.add=function(o){var u;return u=o.name,delete o.name,null!=o.query&&(o.query=i(o.query)),t[u]=o,this[u]=e._partial(r,u).bind(n),this}}(e.url),function(n){var t,r,i,o,u,a,s,c;return i=function(){var t,i,o,u,a,s,c,l;for(s=Object.keys(localStorage),i=0,u=s.length;u>i;i++)t=s[i],e.local[t]=e._partial(r,"local",t).bind(n);for(c=Object.keys(sessionStorage),l=[],o=0,a=c.length;a>o;o++)t=c[o],l.push(e.session[t]=e._partial(r,"session",t).bind(n));return l}(),c=function(e){return"local"===e?localStorage:sessionStorage},r=function(e,n){var t,r;t=c(e).getItem(n);try{return t=JSON.parse(t)}catch(i){return r=i,t}},t=function(t,i,o){return"string"!=typeof o&&(o=JSON.stringify(o)),c(t).setItem(i,o),e[t][i]=e._partial(r,t,i).bind(n)},u=function(n,t){return delete e[n][t],c(n).removeItem(t)},a=function(n){var t,r,i,o;for(r=Object.keys(c(n)),i=0,o=r.length;o>i;i++)t=r[i],delete e[n][t];return c(n).clear()},s=function(e){return c(e).length},o=function(e,n){return null!=c(e)[n]},n.local.add=function(e,n){return t("local",e,n),this},n.local.remove=function(){var e,n,t;for(n=0,t=arguments.length;t>n;n++)e=arguments[n],u("local",e);return this},n.local.removeAll=function(){return a("local"),this},n.local.size=function(){return s("local")},n.local.isAvailable=function(e){return o("local",e)},n.session.get=function(){return r("session","session")},n.session.add=function(){var e,n;return 1===arguments.length?(n="session",e=arguments[0]):(n=arguments[0],e=arguments[1]),t("session",n,e),this},n.session.remove=function(){var e,n,t;if(0===arguments.length)u("session","session");else for(n=0,t=arguments.length;t>n;n++)e=arguments[n],u("session",e);return this},n.session.removeAll=function(){return a("session"),this},n.session.size=function(){return s("session")},n.session.isAvailable=function(){var e;return e=0===arguments.length?"session":arguments[0],o("session",e)}}(e),function(n){return n._Notifications={},n._Notification=function(){return window.Notification},n._requestPermissions=function(){return this._Notification().requestPermission()},n._get=function(e){return this._Notifications[e]},n._create=function(e){var n;return n=e.title,delete e.title,new Notification(n,e)},n._bindAdd=function(e,n){var t;if(null==n&&(n=void 0),null!=n)for(t in n)this._Notifications[e][t]=n[t];return this._Notifications[e]},n.add=function(t){var r;return r=t.name,delete t.name,this._Notifications[r]=t,this[r]=e._partial(this._bindAdd,r).bind(n),this},n.remove=function(){var e,n,t;for(n=0,t=arguments.length;t>n;n++)e=arguments[n],delete this[e];return this},n.show=function(e,n){var t,r;return 1===arguments.length&&"object"==typeof e&&(e=void 0,n=arguments[0]),r=function(e){return function(n){try{return e._requestPermissions(),e._create(n)}catch(t){throw new Error("Notification API is not available.")}}}(this),null==e?r(n):(t=this._bindAdd(e,n),r(t))}}(e.notification),e.$(function(){var n;return n=function(){var n,t,r,i,o,u,a,s,c;s=e.device.detection,c=e.device.noDetection,r=(new UAParser).getResult(),e.device=r.device,delete r.device;for(i in r)u=r[i],("cpu"!==i||null!=i.architecture)&&(e.device[i]=u);return null==e.device.type&&(e.device.type="desktop",delete e.device.vendor,delete e.device.model),a=window.screen.availWidth,n=window.screen.availHeight,o=n>a&&480>a||a>n&&480>n?"small":"normal",t=1>n/a?"landscape":"portrait",e.device.screen={width:a,height:n,size:o,orientation:t},e.device.detection=s,e.device.noDetection=c},n(),e.device.detection(),e.$(window).on("resize",n),e.$(window).on("orientationchange",n)})}).call(this);