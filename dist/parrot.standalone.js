/**
 * parrotjs - Use browser features (Notification, Storage, Vibration, Battery...) and make easy the communication with your API.
 * @version v0.12.9
 * @link    http://github.com/sailor/parrotjs
 * @author  Kiko Beats (https://github.com/Kikobeats)
 * @license MIT
 */
(function(){"use strict";var e;e=this.parrot={version:"0.12.9",$:"undefined"!=typeof $$&&null!==$$?$$:$,_partial:function(e){var t;return t=Array.prototype.slice.call(arguments,1),function(){var n;return n=t.concat(Array.prototype.slice.call(arguments)),e.apply(this,n)}}},function(){var t,n;return t={},n=function(e){var t,n,r,i,u,a,o,s,l,c;for(u=new Url,c=["protocol","path","host","port","hash"],a=0,s=c.length;s>a;a++)n=c[a],u[n]="";for(t=o=0,l=e.length;l>o;t=o+=2)r=e[t],u.query[r]=e[t+1];return i=u.toString(),"?"===i.charAt(0)&&(i=i.substring(1)),i},e.environment="development",e.language=navigator.language.slice(0,2),e.endpoint={add:function(e){return this[e.name]=function(){return e.url},this},set:function(t){return e.environment=t,this}},e.url={getOrUpdate:function(e,r){var i;if(null==r&&(r=void 0),null!=r){for(i in r)t[e][i]=r[i];null!=r.query&&(t[e].query=n(r.query))}return t[e]},add:function(r){var i;return i=r.name,delete r.name,null!=r.query&&(r.query=n(r.query)),t[i]=r,this[i]=e._partial(this.getOrUpdate,i),this}}}(),function(){return e.ajax=function(t,n){var r,i,u,a,o;return r=function(t){var n;return n={METHOD:"get",SEND:{},HEADERS:{},ASYNC:!0,DATATYPE:"json",CONTENT_TYPE:"application/x-www-form-urlencoded"},new Promise(function(r,i){return e.$.ajax({url:t.url,type:t.method||n.METHOD,data:t.send||n.SEND,dataType:t.dataType||n.DATATYPE,contentType:t.contentType||n.CONTENT_TYPE,async:t.async||n.ASYNC,headers:t.headers||n.HEADERS,success:function(e){return 0===e.status?i({code:0,message:{errors:[{param:"url",msg:"Server Unavailable."}]}}):r(e)},error:function(e,t){var n;if(t="object"==typeof e?e:t,null!=t.responseJSON)n=t.responseJSON;else try{n=JSON.parse(t.response)}catch(r){n=t.response}return i({code:t.status,message:n})}})})},i=function(e,t){return r(e).then(function(e){return t(null,e)},function(e){return t(e,null)})},u=""+e.endpoint[e.environment](),t.url?t.url!==u&&t.url!==""+u+"/"+t.path&&t.url!==""+u+"?"+t.query&&t.url!==""+u+"/"+t.path+"?"+t.query&&(null!=t.path&&(t.url=""+t.url+"/"+t.path),null!=t.query&&(t.url=""+t.url+"?"+t.query)):("string"==typeof arguments[0]&&(null!=("function"==typeof(a=e.url)[o=arguments[0]]?a[o]():void 0)?t=e.url.getOrUpdate(arguments[0],arguments[1]):"object"==typeof arguments[1]?(t=arguments[1],t.url=arguments[0]):t={url:arguments[0]},"object"==typeof arguments[1]&&(n=arguments[2])),t.query&&t.path?t.url=""+u+"/"+t.path+"?"+t.query:(t.query&&!t.path&&(t.url=""+u+"?"+t.query),t.path&&!t.query&&(t.url=""+u+"/"+t.path))),i(t,n)}}(),function(){var t,n,r,i,u,a,o,s;return r=function(){var t,r,i,u,a,o,s,l;for(o=Object.keys(localStorage),r=0,u=o.length;u>r;r++)t=o[r],e.local[t]=e._partial(n,"local",t);for(s=Object.keys(sessionStorage),l=[],i=0,a=s.length;a>i;i++)t=s[i],l.push(e.session[t]=e._partial(n,"session",t));return l}(),s=function(e){return"local"===e?localStorage:sessionStorage},n=function(e,t){var n,r;n=s(e).getItem(t);try{return n=JSON.parse(n)}catch(i){return r=i,n}},t=function(t,r,i){return"string"!=typeof i&&(i=JSON.stringify(i)),s(t).setItem(r,i),e[t][r]=e._partial(n,t,r)},u=function(t,n){return delete e[t][n],s(t).removeItem(n)},a=function(t){var n,r,i,u;for(r=Object.keys(s(t)),i=0,u=r.length;u>i;i++)n=r[i],delete e[t][n];return s(t).clear()},o=function(e){return s(e).length},i=function(e,t){return null!=s(e)[t]},e.local={add:function(e,n){return t("local",e,n),this},remove:function(){var e,t,n;for(t=0,n=arguments.length;n>t;t++)e=arguments[t],u("local",e);return this},removeAll:function(){return a("local"),this},size:function(){return o("local")},isAvailable:function(e){return i("local",e)}},e.session={get:function(){return n("session","session")},add:function(){var e,n;return 1===arguments.length?(n="session",e=arguments[0]):(n=arguments[0],e=arguments[1]),t("session",n,e),this},remove:function(){var e,t,n;if(0===arguments.length)u("session","session");else for(t=0,n=arguments.length;n>t;t++)e=arguments[t],u("session",e);return this},removeAll:function(){return a("session"),this},size:function(){return o("session")},isAvailable:function(){var e;return e=0===arguments.length?"session":arguments[0],i("session",e)}}}(),function(){var t;return t={},e.notification={getOrUpdate:function(e,n){var r;if(null==n&&(n=void 0),null!=n)for(r in n)t[e][r]=n[r];return t[e]},add:function(n){var r;return r=n.name,delete n.name,t[r]=n,this[r]=e._partial(this.getOrUpdate,r),this},show:function(e,t){var n,r;return 1===arguments.length&&"object"==typeof e&&(e=void 0,t=arguments[0]),r=function(e){var t,n;try{return Notification.requestPermission(),n=e.title,delete e.title,new Notification(n,e)}catch(r){throw t=r,new Error("Notification API is not available.")}},null==e?r(t):(n=this.getOrUpdate(e,t),r(n))}}}(),function(){var t;return t=document.body,e.device={detection:function(){return t.dataset.lang=e.language,t.dataset.os=e.device.os.name.toLowerCase(),t.dataset.device=e.device.type,t.dataset.orientation=e.device.screen.orientation,t.dataset.screen=e.device.screen.size,t.dataset.retina=1===this.screen.pixelRatio?!1:!0},noDetection:function(){var e,n,r,i,u;for(i=["lang","os","device","orientation","screen","retina"],u=[],n=0,r=i.length;r>n;n++)e=i[n],u.push(delete t.dataset[e]);return u}}}(),e.$(function(){var t;return t=function(){var t,n,r,i,u,a,o,s,l,c,d;l=e.device.detection,d=e.device.noDetection,u=function(e,t){var n,r,i;return r=function(e,t){return 0===t?e:r(t,e%t)},e===t?"1/1":(t>e&&(i=e,e=t,t=i),n=r(e,t),"undefined"==typeof i?e/n+"/"+t/n:t/n+"/"+e/n)},r=(new UAParser).getResult(),delete r.ua,null!=r.cpu.architecture&&(r.cpu=r.cpu.architecture),delete r.cpu,c=r.device,delete r.device;for(i in c)o=c[i],null!=o&&(r[i]=o);return e.device=r,s=screen.width,t=screen.height,a=t>s&&480>s||s>t&&480>t?"small":"normal",n=1>t/s?"landscape":"portrait",e.device.screen={width:s,height:t,size:a,orientation:n,pixelRatio:devicePixelRatio||"unsupported",aspectRatio:u(s,t)},null==e.device.type&&"normal"===a&&(e.device.type="desktop"),e.device.detection=l,e.device.noDetection=d},t(),e.device.detection(),e.$(window).on("resize",t),e.$(window).on("orientationchange",t)})}).call(this);