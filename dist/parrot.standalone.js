/**
 * parrotjs - Client library to connect your frontend application with whatever API backend
 * @version v0.11.27a
 * @link    http://github.com/sailor/parrotjs
 * @author  Kiko Beats (https://github.com/Kikobeats)
 * @license MIT
 */
(function(){"use strict";var e;e=this.parrot={version:"0.12.7beta",environment:"development",language:window.navigator.language.slice(0,2),endpoint:{},url:{},local:{},session:{},notification:{},device:{},$:"undefined"!=typeof $$&&null!==$$?$$:$},e.device.detection=function(){return e.$(document.body).attr("data-lang",e.language),e.$(document.body).attr("data-os",e.device.os.name),e.$(document.body).attr("data-device",e.device.type),e.$(document.body).attr("data-orientation",e.device.screen.orientation),e.$(document.body).attr("data-screen",e.device.screen.size)},e.device.noDetection=function(){var t,n,r,i,o;for(i=["lang","os","device","orientation","screen"],o=[],n=0,r=i.length;r>n;n++)t=i[n],o.push(e.$(document.body).removeAttr("data-"+t));return o},function(){return e._partial=function(e){var t;return t=Array.prototype.slice.call(arguments,1),function(){var n;return n=t.concat(Array.prototype.slice.call(arguments)),e.apply(this,n)}},e.ajax=function(t,n){var r,i,o;return r=function(t){var n;return n={METHOD:"get",SEND:{},HEADERS:{},ASYNC:!0,DATATYPE:"json",CONTENT_TYPE:"application/x-www-form-urlencoded"},new Promise(function(){return function(r,i){return e.$.ajax({url:t.url,type:t.method||n.METHOD,data:t.send||n.SEND,dataType:t.dataType||n.DATATYPE,contentType:t.contentType||n.CONTENT_TYPE,async:t.async||n.ASYNC,headers:t.headers||n.HEADERS,success:function(e){return 0===e.status?i({code:0,message:{errors:[{param:"url",msg:"Server Unavailable."}]}}):r(e)},error:function(e,t){var n;if(t="object"==typeof e?e:t,null!=t.responseJSON)n=t.responseJSON;else try{n=JSON.parse(t.response)}catch(r){n=t.response}return i({code:t.status,message:n})}})}}(this))},i=function(){return function(e,t){return r(e).then(function(e){return t(null,e)},function(e){return t(e,null)})}}(this),o=""+e.endpoint[e.environment](),t.url?t.url!==o&&t.url!==""+o+"/"+t.path&&t.url!==""+o+"?"+t.query&&t.url!==""+o+"/"+t.path+"?"+t.query&&(null!=t.path&&(t.url=""+t.url+"/"+t.path),null!=t.query&&(t.url=""+t.url+"?"+t.query)):("string"==typeof arguments[0]&&(null!=e.url._URLS[arguments[0]]?t=e.url._bindAdd(arguments[0],arguments[1]):"object"==typeof arguments[1]?(t=arguments[1],t.url=arguments[0]):t={url:arguments[0]},"object"==typeof arguments[1]&&(n=arguments[2])),t.query&&t.path?t.url=""+o+"/"+t.path+"?"+t.query:(t.query&&!t.path&&(t.url=""+o+"?"+t.query),t.path&&!t.query&&(t.url=""+o+"/"+t.path))),i(t,n)}}(),function(t){return t.add=function(e){return this[e.name]=function(){return e.url},this},t.set=function(t){return e.environment=t,this}}(e.endpoint),function(t){return t._URLS={},t._getQuery=function(e){var t,n,r,i,o,u,s,a,c,l;for(o=new Url,l=["protocol","path","host","port","hash"],u=0,a=l.length;a>u;u++)n=l[u],o[n]="";for(t=s=0,c=e.length;c>s;t=s+=2)r=e[t],o.query[r]=e[t+1];return i=o.toString(),"?"===i.charAt(0)&&(i=i.substring(1)),i},t._bindAdd=function(e,t){var n;if(null==t&&(t=void 0),null!=t){for(n in t)this._URLS[e][n]=t[n];null!=t.query&&(this._URLS[e].query=this._getQuery(t.query))}return this._URLS[e]},t.add=function(n){var r;return r=n.name,delete n.name,null!=n.query&&(n.query=this._getQuery(n.query)),this._URLS[r]=n,this[r]=e._partial(this._bindAdd,r).bind(t),this}}(e.url),function(t){var n,r,i,o,u,s,a,c;return i=function(){var n,i,o,u,s,a,c,l;for(a=Object.keys(localStorage),i=0,u=a.length;u>i;i++)n=a[i],e.local[n]=e._partial(r,"local",n).bind(t);for(c=Object.keys(sessionStorage),l=[],o=0,s=c.length;s>o;o++)n=c[o],l.push(e.session[n]=e._partial(r,"session",n).bind(t));return l}(),c=function(e){return"local"===e?localStorage:sessionStorage},r=function(e,t){var n,r;n=c(e).getItem(t);try{return n=JSON.parse(n)}catch(i){return r=i,n}},n=function(n,i,o){return"string"!=typeof o&&(o=JSON.stringify(o)),c(n).setItem(i,o),e[n][i]=e._partial(r,n,i).bind(t)},u=function(t,n){return delete e[t][n],c(t).removeItem(n)},s=function(t){var n,r,i,o;for(r=Object.keys(c(t)),i=0,o=r.length;o>i;i++)n=r[i],delete e[t][n];return c(t).clear()},a=function(e){return c(e).length},o=function(e,t){return null!=c(e)[t]},t.local.add=function(e,t){return n("local",e,t),this},t.local.remove=function(){var e,t,n;for(t=0,n=arguments.length;n>t;t++)e=arguments[t],u("local",e);return this},t.local.removeAll=function(){return s("local"),this},t.local.size=function(){return a("local")},t.local.isAvailable=function(e){return o("local",e)},t.session.get=function(){return r("session","session")},t.session.add=function(){var e,t;return 1===arguments.length?(t="session",e=arguments[0]):(t=arguments[0],e=arguments[1]),n("session",t,e),this},t.session.remove=function(){var e,t,n;if(0===arguments.length)u("session","session");else for(t=0,n=arguments.length;n>t;t++)e=arguments[t],u("session",e);return this},t.session.removeAll=function(){return s("session"),this},t.session.size=function(){return a("session")},t.session.isAvailable=function(){var e;return e=0===arguments.length?"session":arguments[0],o("session",e)}}(e),function(t){return t._Notifications={},t._Notification=function(){return window.Notification},t._requestPermissions=function(){return this._Notification().requestPermission()},t._get=function(e){return this._Notifications[e]},t._create=function(e){var t;return t=e.title,delete e.title,new Notification(t,e)},t._bindAdd=function(e,t){var n;if(null==t&&(t=void 0),null!=t)for(n in t)this._Notifications[e][n]=t[n];return this._Notifications[e]},t.add=function(n){var r;return r=n.name,delete n.name,this._Notifications[r]=n,this[r]=e._partial(this._bindAdd,r).bind(t),this},t.remove=function(){var e,t,n;for(t=0,n=arguments.length;n>t;t++)e=arguments[t],delete this[e];return this},t.show=function(e,t){var n,r;return 1===arguments.length&&"object"==typeof e&&(e=void 0,t=arguments[0]),r=function(e){return function(t){try{return e._requestPermissions(),e._create(t)}catch(n){throw new Error("Notification API is not available.")}}}(this),null==e?r(t):(n=this._bindAdd(e,t),r(n))}}(e.notification),e.$(function(){var t;return t=function(){var t,n,r,i,o,u,s,a,c;a=e.device.detection,c=e.device.noDetection,r=(new UAParser).getResult(),e.device=r.device,delete r.device;for(i in r)u=r[i],("cpu"!==i||null!=i.architecture)&&(e.device[i]=u);return null==e.device.type&&(e.device.type="desktop",delete e.device.vendor,delete e.device.model),s=window.screen.availWidth,t=window.screen.availHeight,o=t>s&&480>s||s>t&&480>t?"small":"normal",n=1>t/s?"landscape":"portrait",e.device.screen={width:s,height:t,size:o,orientation:n},e.device.detection=a,e.device.noDetection=c},t(),e.device.detection(),e.$(window).on("resize",t),e.$(window).on("orientationchange",t)})}).call(this);