/**
 * parrotjs - Client library to connect your frontend application with whatever API backend
 * @version v0.11.27a
 * @link    http://github.com/sailor/parrotjs
 * @author  Kiko Beats (https://github.com/Kikobeats)
 * @license MIT
 */
(function(){"use strict";var e;e=this.parrot={version:"0.12.7beta",environment:"development",language:window.navigator.language.slice(0,2),endpoint:{},url:{},local:{},session:{},notification:{},device:{},$:"undefined"!=typeof $$&&null!==$$?$$:$},e._partial=function(e){var n;return n=Array.prototype.slice.call(arguments,1),function(){var t;return t=n.concat(Array.prototype.slice.call(arguments)),e.apply(this,t)}},e.device.detection=function(){return e.$(document.body).attr("data-lang",e.language),e.$(document.body).attr("data-os",e.device.os.name),e.$(document.body).attr("data-device",e.device.type),e.$(document.body).attr("data-orientation",e.device.screen.orientation),e.$(document.body).attr("data-screen",e.device.screen.size)},e.device.noDetection=function(){var n,t,r,o,i;for(o=["lang","os","device","orientation","screen"],i=[],t=0,r=o.length;r>t;t++)n=o[t],i.push(e.$(document.body).removeAttr("data-"+n));return i},function(n){return n.add=function(e){return this[e.name]=function(){return e.url},this},n.set=function(n){return e.environment=n,this}}(e.endpoint),function(n){var t,r;return t={},r=function(e){var n,t,r,o,i,a,u,s,l,c;for(i=new Url,c=["protocol","path","host","port","hash"],a=0,s=c.length;s>a;a++)t=c[a],i[t]="";for(n=u=0,l=e.length;l>u;n=u+=2)r=e[n],i.query[r]=e[n+1];return o=i.toString(),"?"===o.charAt(0)&&(o=o.substring(1)),o},n.getOrUpdate=function(e,n){var o;if(null==n&&(n=void 0),null!=n){for(o in n)t[e][o]=n[o];null!=n.query&&(t[e].query=r(n.query))}return t[e]},n.add=function(o){var i;return i=o.name,delete o.name,null!=o.query&&(o.query=r(o.query)),t[i]=o,this[i]=e._partial(this.getOrUpdate,i).bind(n),this}}(e.url),function(){return e.ajax=function(n,t){var r,o,i,a,u;return r=function(n){var t;return t={METHOD:"get",SEND:{},HEADERS:{},ASYNC:!0,DATATYPE:"json",CONTENT_TYPE:"application/x-www-form-urlencoded"},new Promise(function(){return function(r,o){return e.$.ajax({url:n.url,type:n.method||t.METHOD,data:n.send||t.SEND,dataType:n.dataType||t.DATATYPE,contentType:n.contentType||t.CONTENT_TYPE,async:n.async||t.ASYNC,headers:n.headers||t.HEADERS,success:function(e){return 0===e.status?o({code:0,message:{errors:[{param:"url",msg:"Server Unavailable."}]}}):r(e)},error:function(e,n){var t;if(n="object"==typeof e?e:n,null!=n.responseJSON)t=n.responseJSON;else try{t=JSON.parse(n.response)}catch(r){t=n.response}return o({code:n.status,message:t})}})}}(this))},o=function(){return function(e,n){return r(e).then(function(e){return n(null,e)},function(e){return n(e,null)})}}(this),i=""+e.endpoint[e.environment](),n.url?n.url!==i&&n.url!==""+i+"/"+n.path&&n.url!==""+i+"?"+n.query&&n.url!==""+i+"/"+n.path+"?"+n.query&&(null!=n.path&&(n.url=""+n.url+"/"+n.path),null!=n.query&&(n.url=""+n.url+"?"+n.query)):("string"==typeof arguments[0]&&(null!=("function"==typeof(a=e.url)[u=arguments[0]]?a[u]():void 0)?n=e.url.getOrUpdate(arguments[0],arguments[1]):"object"==typeof arguments[1]?(n=arguments[1],n.url=arguments[0]):n={url:arguments[0]},"object"==typeof arguments[1]&&(t=arguments[2])),n.query&&n.path?n.url=""+i+"/"+n.path+"?"+n.query:(n.query&&!n.path&&(n.url=""+i+"?"+n.query),n.path&&!n.query&&(n.url=""+i+"/"+n.path))),o(n,t)}}(),function(n){var t,r,o,i,a,u,s,l;return o=function(){var t,o,i,a,u,s,l,c;for(s=Object.keys(localStorage),o=0,a=s.length;a>o;o++)t=s[o],e.local[t]=e._partial(r,"local",t).bind(n);for(l=Object.keys(sessionStorage),c=[],i=0,u=l.length;u>i;i++)t=l[i],c.push(e.session[t]=e._partial(r,"session",t).bind(n));return c}(),l=function(e){return"local"===e?localStorage:sessionStorage},r=function(e,n){var t,r;t=l(e).getItem(n);try{return t=JSON.parse(t)}catch(o){return r=o,t}},t=function(t,o,i){return"string"!=typeof i&&(i=JSON.stringify(i)),l(t).setItem(o,i),e[t][o]=e._partial(r,t,o).bind(n)},a=function(n,t){return delete e[n][t],l(n).removeItem(t)},u=function(n){var t,r,o,i;for(r=Object.keys(l(n)),o=0,i=r.length;i>o;o++)t=r[o],delete e[n][t];return l(n).clear()},s=function(e){return l(e).length},i=function(e,n){return null!=l(e)[n]},n.local.add=function(e,n){return t("local",e,n),this},n.local.remove=function(){var e,n,t;for(n=0,t=arguments.length;t>n;n++)e=arguments[n],a("local",e);return this},n.local.removeAll=function(){return u("local"),this},n.local.size=function(){return s("local")},n.local.isAvailable=function(e){return i("local",e)},n.session.get=function(){return r("session","session")},n.session.add=function(){var e,n;return 1===arguments.length?(n="session",e=arguments[0]):(n=arguments[0],e=arguments[1]),t("session",n,e),this},n.session.remove=function(){var e,n,t;if(0===arguments.length)a("session","session");else for(n=0,t=arguments.length;t>n;n++)e=arguments[n],a("session",e);return this},n.session.removeAll=function(){return u("session"),this},n.session.size=function(){return s("session")},n.session.isAvailable=function(){var e;return e=0===arguments.length?"session":arguments[0],i("session",e)}}(e),function(n){var t;return t={},n.getOrUpdate=function(e,n){var r;if(null==n&&(n=void 0),null!=n)for(r in n)t[e][r]=n[r];return t[e]},n.add=function(r){var o;return o=r.name,delete r.name,t[o]=r,this[o]=e._partial(this.getOrUpdate,o).bind(n),this},n.show=function(e,n){var t,r;return 1===arguments.length&&"object"==typeof e&&(e=void 0,n=arguments[0]),r=function(){return function(e){var n,t;try{return window.Notification.requestPermission(),t=e.title,delete e.title,new Notification(t,e)}catch(r){throw n=r,new Error("Notification API is not available.")}}}(this),null==e?r(n):(t=this.getOrUpdate(e,n),r(t))}}(e.notification),e.$(function(){var n;return n=function(){var n,t,r,o,i,a,u,s,l;s=e.device.detection,l=e.device.noDetection,r=(new UAParser).getResult(),e.device=r.device,delete r.device;for(o in r)a=r[o],("cpu"!==o||null!=o.architecture)&&(e.device[o]=a);return null==e.device.type&&(e.device.type="desktop",delete e.device.vendor,delete e.device.model),u=window.screen.availWidth,n=window.screen.availHeight,i=n>u&&480>u||u>n&&480>n?"small":"normal",t=1>n/u?"landscape":"portrait",e.device.screen={width:u,height:n,size:i,orientation:t},e.device.detection=s,e.device.noDetection=l},n(),e.device.detection(),e.$(window).on("resize",n),e.$(window).on("orientationchange",n)})}).call(this);